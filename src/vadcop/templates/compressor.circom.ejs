pragma circom 2.1.0;
pragma custom_templates;

<% for (let i = 0; i < verifierFilenames.length; ++i) { -%>
    include "<%- verifierFilenames[i] %>";
<% } -%>

<%- include('src/vadcop/helpers/templates/calculate_hashes.circom.ejs', { starkInfo, vadcopInfo }); %>

template Main() {

<%- include('src/main_templates/define_stark_inputs.circom.ejs', { prefix: "", starkInfo, nPublics: starkInfo.nPublics }); %>

    signal input aggregationTypes[<%- vadcopInfo.aggTypes[starkInfo.subproofId].length  %>];

    signal input challenges[<%- vadcopInfo.numChallenges.reduce((nc, acc) => nc + acc, 0) + 4 %>][3];
    signal input challengesFRISteps[<%- vadcopInfo.stepsFRI.length  + 1 %>][3];
   
<%- include('src/main_templates/vadcop/define_vadcop_inputs.circom.ejs', { vadcopInfo, starkInfo, prefix: "", options: {...options, isInput: true} }); %>

<%- include('src/main_templates/assign_stark_inputs.circom.ejs', { componentName: "sV", starkInfo, nPublics: starkInfo.nPublics }); %>

<%- include('src/main_templates/vadcop/init_vadcop_inputs.circom.ejs', { componentName: "sV", starkInfo, vadcopInfo }); %>

}

component main {public [publics, challenges, challengesFRISteps]} = Main();
